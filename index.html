<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livraria</title>
    <link rel="stylesheet" href="estilos.css">


    <script>
        function mais(id) {
            var input = document.getElementById(id);
            var valorAtual = parseInt(input.value);
            valorAtual++;
            input.value = valorAtual;
            multiplicar(id)
        }
        function menos(id) {
            var input = document.getElementById(id);
            var valorAtual = parseInt(input.value);
            valorAtual--;
            valorAtual = Math.max(valorAtual, 0);
            input.value = valorAtual;
            multiplicar(id)
        }


        function verificarCompra(id) {
            var input = document.getElementById(id)
            var valorAtual = parseInt(input.value);
            sessionStorage.setItem('quantia', JSON.stringify(valorAtual))

            if (valorAtual === 0) {
                alert('Você precisa selecionar 1 item a compra.');
                event.preventDefault();
            }
            else {
                alert("Complete o cadastro para concluir a compra!!")

                if (sessionStorage.getItem(quantia)) {
                    var quantia = JSON.parse(sessionStorage.getItem('quantia'));
                    quantia = 0
                }

            }
        }
        function multiplicar(id) {
            var input = document.getElementById(id)
            var valorInput = parseInt(input.value);
            var preço = document.getElementById("preço_" + id).innerHTML
            var preço_float = parseFloat(preço)
            var area = document.getElementById('val_' + id + 'produto')
            var h1 = document.getElementById('val_' + id)
            h1.innerHTML = 'R$ ' + (valorInput * preço_float)

         
    }



    
    function validarFormulario(id) {
            event.preventDefault();
            var nome = document.getElementById('nome').value
            var cpf = document.getElementById('cpf').value
            var email = document.getElementById('email').value
            var contato = document.getElementById('contato').value
            var cep = document.getElementById('cep').value
            var area = document.getElementById('val_' + id + 'produto').value
            var cpfRegex = /^\d{3}\.?\d{3}\.?\d{3}-?\d{2};
            var emailRegex = /^\w+([\.-]?\w+)@\w+([\.-]?\w+)(\.\w{2,3})+$/; }

            
       

            function preencherTextarea(id) {
            localStorage.getItem('vendas')
            var vendas = JSON.parse(localStorage.getItem('vendas'));
            for(var i = vendas.length -1; i < vendas.length; i++){
                var preço = vendas[i]
                console.log(preço)
            }

            if (localStorage.getItem('produto')) {
                var livro = JSON.parse(localStorage.getItem('produto'));
            }
            
            if (localStorage.getItem('produto')) {
                var nome2 = JSON.parse(localStorage.getItem('produto'));
            }
              quant = parseInt(document.getElementById('inp').value); 
              quant2 = parseInt(document.getElementById('inj').value);
              quant3 = parseInt(document.getElementById('ins').value);
        var texto = document.getElementById('nome').value + ' comprou no valor de: R$' + preço + ' uma quantia de: ' + quant + ' unidades do(a) ' + livro +' e ' + quant2 + ' unidades do(a) ' + quant3 + ' unidades do(a) ' + produto +'.'
        document.getElementById("tea").value = texto;
        }

        
       





    </script>
</head>

<body>
    <header>
        <h1>Livraria Fantástica</h1>
        <nav>
            <ul>
                <li><a href="index.html">Início</a></li>
                <li><a href="index.html">Livros</a></li>
                <li><a href="index.html">Autores</a></li>
                <li><a href="index.html">Contato</a></li>
                <li><a href="cadastro.html">Cadastro</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="cards">
            <div class="card">
                <img src="img/Um-Corpo-na-Biblioteca.jpg" alt="Livro 1">
                <h2 id="produto">Um Corpo na Biblioteca</h2>
                <p>Autor: Agatha Cristie</p>

                <button onclick="mais('inp')">+</button>
                <input id="inp" type="number" id="numero" value="0" min="0" readonly>
                <button onclick="menos('inp')">-</button>
                <p>Preço: <span id="preço_inp">32,00</span></p>
                <p id="val_inp">R$0</p>
                <button><a href="cadastro.html" onclick="verificarCompra('inp')">Comprar</a></button>
            </div>

            <div class="card">
                <img src="img/colleen hoover.jpeg" alt="Livro 2">
                <h2 id="produto">É Assim Que Acaba</h2>
                <p>Autor: Colleen Hoover</p>

                <button onclick="mais('ins')">+</button>
                <input id="ins" type="number" id="numero" value="0" min="0" readonly>
                <button onclick="menos('ins')">-</button>
                <p>Preço: <span id="preço_ins">35,00</span></p>
                <p id="val_ins">R$0</p>
                <button><a href="cadastro.html" onclick="verificarCompra('ins')">Comprar</a></button>
            </div>

            <div class="card">
                <img src="img/alyssa cole.jpg" alt="Livro 3">
                <h2 id="produto">Quando Ninguém Está Olhando</h2>
                <p>Autor: Alyssa Cole</p>

                <button onclick="mais('inj')">+</button>
                <input id="inj" type="number" id="numero" value="0" min="0" readonly>
                <button onclick="menos('inj')">-</button>
                <p>Preço: <span id="preço_inj">38,00</span></p>
                <p id="val_inj">R$0</p>
                <button><a href="cadastro.html" onclick="verificarCompra('inj')">Comprar</a></button>
            </div>

        </section>



    </main>
    <footer>
        <p>&copy; 2023 Livraria Fantástica | Criado por Ana Clara</p>
    </footer>
</body>

</html>